{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["// 写共用方法\r\nexport function isObject(obj) {\r\n    return typeof obj === 'object' && obj !== null;\r\n}","import { isObject } from '../utils';\r\n\r\nclass Observe {\r\n    constructor(data) {\r\n        //  对数据进行索引进行拦截 性能差而且直接更改索引的方法并不多\r\n\r\n        \r\n        this.walk(data);  // 可以对数据一步一步的处理\r\n    }\r\n\r\n    walk(data) {\r\n        // 对象的循环\r\n        Object.keys(data).forEach(key => {\r\n            defineReactive(data, key, data[key]);  //定义响应式的数据变化\r\n        })\r\n    }\r\n}\r\n// vue2 的性能问题 递归重写get和set  (proxy 解决了)\r\nfunction defineReactive(data, key, value) {\r\n    observe(value); // 如果传入的值还是一个对象的花 就做递归循环检测\r\n    Object.defineProperty(data, key, {\r\n        get() {\r\n            return value\r\n        },\r\n        set(newValue) {\r\n            if (newValue === value) return;\r\n            observe(value);  // 监控当前设置的值，有可能设置的值也是对象  \r\n            value = newValue\r\n        }\r\n    })\r\n}\r\nexport function observe(data) {\r\n    // 对象就是使用defineProperty  来实现响应式原理\r\n\r\n    // 如果这个数据不是对象 或者是null 那就不用监控了\r\n    if (!isObject(data)) {\r\n        return;\r\n    }\r\n    // 对数据进行defineProperty\r\n    return new Observe(data);   // 可以看到当前的数据被观测过了\r\n}","import { observe } from './observer/index.js'\r\nexport function initState(vm) {\r\n    const opts = vm.$options;\r\n    if (opts.props) {\r\n        initProps(vm);\r\n    }\r\n    if (opts.methods) {\r\n        initMethod(vm);\r\n    }\r\n    if (opts.data) {\r\n        initData(vm);\r\n    }\r\n    // computed  ...watch\r\n}\r\n\r\nfunction initProps() { }\r\nfunction initMethod() { }\r\nfunction initData(vm) {\r\n    //  数据响应式原理\r\n    let data = vm.$options.data;  // 用户传入的数据\r\n    // vm._data 就是检测后的数据了\r\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data;   // 如果data 为function 时，call后data函数执行\r\n    // 观测数据\r\n    observe(data);\r\n}","import { initState } from './state'\r\n\r\nexport function initMixin(Vue) {\r\n\tVue.prototype._init = function (options) {\r\n\t\t// vUE 的内部有个属性 $options  就是用户传递的所有参数\r\n\t\t//在data外面定义的属性和方法通过$options可以获取和调用\r\n\t\tconst vm = this;\r\n\t\tvm.$options = options;  // 用户传入的参数\r\n\r\n\t\tinitState(vm);   // 初始化状态\r\n\t}\r\n}","import {initMixin} from './init';\r\nfunction Vue(options) {\r\n\t// 内部要进行初始化的操作\r\n\tthis._init(options);  // 初始化操作 此方法后面还会被用，所以写道原型上\r\n}\r\n\r\ninitMixin(Vue);  // 添加原型方法\r\n\r\n\r\nexport default Vue;"],"names":["isObject","obj","Observe","data","walk","Object","keys","forEach","key","defineReactive","value","observe","defineProperty","get","set","newValue","initState","vm","opts","$options","props","methods","initData","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;EACO,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;EAC1B,SAAO,QAAOA,GAAP,MAAe,QAAf,IAA2BA,GAAG,KAAK,IAA1C;EACH;;MCDKC;EACF,mBAAYC,IAAZ,EAAkB;EAAA;;EACd;EAGA,SAAKC,IAAL,CAAUD,IAAV,EAJc;EAKjB;;;;2BAEIA,MAAM;EACP;EACAE,MAAAA,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAAAC,GAAG,EAAI;EAC7BC,QAAAA,cAAc,CAACN,IAAD,EAAOK,GAAP,EAAYL,IAAI,CAACK,GAAD,CAAhB,CAAd,CAD6B;EAEhC,OAFD;EAGH;;;;;;;EAGL,SAASC,cAAT,CAAwBN,IAAxB,EAA8BK,GAA9B,EAAmCE,KAAnC,EAA0C;EACtCC,EAAAA,OAAO,CAACD,KAAD,CAAP,CADsC;;EAEtCL,EAAAA,MAAM,CAACO,cAAP,CAAsBT,IAAtB,EAA4BK,GAA5B,EAAiC;EAC7BK,IAAAA,GAD6B,iBACvB;EACF,aAAOH,KAAP;EACH,KAH4B;EAI7BI,IAAAA,GAJ6B,eAIzBC,QAJyB,EAIf;EACV,UAAIA,QAAQ,KAAKL,KAAjB,EAAwB;EACxBC,MAAAA,OAAO,CAACD,KAAD,CAAP,CAFU;;EAGVA,MAAAA,KAAK,GAAGK,QAAR;EACH;EAR4B,GAAjC;EAUH;;EACM,SAASJ,OAAT,CAAiBR,IAAjB,EAAuB;EAC1B;EAEA;EACA,MAAI,CAACH,QAAQ,CAACG,IAAD,CAAb,EAAqB;EACjB;EACH,GANyB;;;EAQ1B,SAAO,IAAID,OAAJ,CAAYC,IAAZ,CAAP,CAR0B;EAS7B;;ECvCM,SAASa,SAAT,CAAmBC,EAAnB,EAAuB;EAC1B,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB;;EACA,MAAID,IAAI,CAACE,KAAT,EAAgB;;EAGhB,MAAIF,IAAI,CAACG,OAAT,EAAkB;;EAGlB,MAAIH,IAAI,CAACf,IAAT,EAAe;EACXmB,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACH,GAVyB;;EAY7B;;EAID,SAASK,QAAT,CAAkBL,EAAlB,EAAsB;EAClB;EACA,MAAId,IAAI,GAAGc,EAAE,CAACE,QAAH,CAAYhB,IAAvB,CAFkB;EAGlB;;EACAA,EAAAA,IAAI,GAAGc,EAAE,CAACM,KAAH,GAAW,OAAOpB,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACqB,IAAL,CAAUP,EAAV,CAA7B,GAA6Cd,IAA/D,CAJkB;EAKlB;;EACAQ,EAAAA,OAAO,CAACR,IAAD,CAAP;EACH;;ECtBM,SAASsB,SAAT,CAAmBC,GAAnB,EAAwB;EAC9BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACxC;EACA;EACA,QAAMZ,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcU,OAAd,CAJwC;;EAMxCb,IAAAA,SAAS,CAACC,EAAD,CAAT,CANwC;EAOxC,GAPD;EAQA;;ECVD,SAASS,GAAT,CAAaG,OAAb,EAAsB;EACrB;EACA,OAAKD,KAAL,CAAWC,OAAX,EAFqB;;EAGrB;;EAEDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}